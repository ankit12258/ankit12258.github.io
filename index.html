<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Fun Zone</title>
    <style>
        body {
            margin: 0;
            font-family: 'Arial', sans-serif;
            background: linear-gradient(-45deg, #1d2b64, #f8cdda);
            color: #fff;
            text-align: center;
        }
        nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
        }
        nav button {
            background: #ff4081;
            border: none;
            color: white;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        nav button:hover {
            background: #e91e63;
        }
        .panel {
            display: none;
            padding: 30px;
        }
        .active {
            display: block;
        }
        .health-bar {
            height: 20px;
            background: red;
            border-radius: 10px;
            margin: 10px auto;
            width: 80%;
        }
        .game-area {
            margin-top: 30px;
        }
        .fight-controls button {
            background: #4caf50;
            padding: 10px 25px;
            border-radius: 50px;
            font-size: 18px;
            border: none;
            margin: 10px;
            cursor: pointer;
        }
        .fight-controls button:hover {
            background: #388e3c;
        }
    </style>
</head>
<body>

<nav>
    <button onclick="showPanel('click-panel')">Click Battle</button>
    <button onclick="showPanel('fight-panel')">Fight Battle</button>
</nav>

<div id="click-panel" class="panel active">
    <h1>üî• CLICK BATTLE üî•</h1>
    <p>Your Score: <span id="score">0</span></p>
    <button onclick="clickScore()">CLICK!</button>
    <div>
        <h2>üèÜ Leaderboard</h2>
        <div id="click-leaderboard">Loading...</div>
    </div>
</div>

<div id="fight-panel" class="panel">
    <h1>‚öîÔ∏è FIGHT BATTLE ‚öîÔ∏è</h1>
    <div class="game-area">
        <p>Your Health</p>
        <div class="health-bar" id="your-health" style="width: 100%;"></div>
        <p>Enemy Health</p>
        <div class="health-bar" id="enemy-health" style="width: 100%;"></div>
        <div class="fight-controls">
            <button onclick="attackEnemy()">ATTACK</button>
            <button onclick="defendSelf()">DEFEND</button>
        </div>
        <div id="fight-result"></div>
    </div>
</div>

<script>
    let score = 0;

    function showPanel(id) {
        document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    function clickScore() {
        score++;
        document.getElementById('score').textContent = score;
        // TODO: Firebase score update
    }

    // Fighting Game Logic
    let yourHealth = 100;
    let enemyHealth = 100;
    let isDefending = false;

    function updateHealthBars() {
        document.getElementById('your-health').style.width = yourHealth + '%';
        document.getElementById('enemy-health').style.width = enemyHealth + '%';
    }

    function attackEnemy() {
        const hit = Math.floor(Math.random() * 20 + 5);
        if (Math.random() < 0.3) {
            document.getElementById('fight-result').innerText = "MISS!";
            return;
        }
        enemyHealth -= hit;
        document.getElementById('fight-result').innerText = `You hit enemy for ${hit}!`;
        enemyMove();
        updateHealthBars();
        checkWinner();
    }

    function defendSelf() {
        isDefending = true;
        document.getElementById('fight-result').innerText = "You're defending!";
        enemyMove();
    }

    function enemyMove() {
        const damage = Math.floor(Math.random() * 15 + 3);
        if (isDefending) {
            yourHealth -= Math.floor(damage / 2);
            document.getElementById('fight-result').innerText += ` Enemy attacked but you blocked most of it! (-${Math.floor(damage/2)})`;
        } else {
            yourHealth -= damage;
            document.getElementById('fight-result').innerText += ` Enemy hit you for ${damage}!`;
        }
        isDefending = false;
        updateHealthBars();
    }

    function checkWinner() {
        if (yourHealth <= 0) {
            document.getElementById('fight-result').innerText = "üíÄ You lost!";
            disableFightButtons();
        } else if (enemyHealth <= 0) {
            document.getElementById('fight-result').innerText = "üèÜ You Win!";
            disableFightButtons();
        }
    }

    function disableFightButtons() {
        document.querySelectorAll('.fight-controls button').forEach(btn => btn.disabled = true);
    }
</script>

</body>
</html>
